$(function(){$.getJSON("http://innohs.com:1323/operation/byweekday?dbname=testdb",function(e){weekday=["일","토","금","목","수","화","월"],department=[],deptmap={},chartdata=[],$.each(e,function(e,t){dep=t.department,dep in deptmap?e=deptmap[dep]:(e=department.length,department.push(dep),deptmap[dep]=e),dow=t.weekday,chartdata.push([e,weekday.indexOf(dow),t.count])}),Highcharts.chart("container",{chart:{type:"heatmap",marginTop:40,marginBottom:80,plotBorderWidth:1},title:{text:"요일별 수술 현황"},xAxis:{categories:department},yAxis:{categories:weekday,title:"요일"},colorAxis:{min:0,minColor:"#FFFFFF",maxColor:Highcharts.getOptions().colors[0]},legend:{align:"right",layout:"vertical",margin:0,verticalAlign:"top",y:25,symbolHeight:280},tooltip:{formatter:function(){return"<b>"+this.series.xAxis.categories[this.point.x]+"</b> 수술 <br><b>"+this.point.value+"</b>번<br><b>"+this.series.yAxis.categories[this.point.y]+"요일</b>"}},series:[{name:"Sales per employee",borderWidth:1,data:chartdata,dataLabels:{enabled:!0}}],credits:{enabled:!1},events:{click:function(e){console.log(e)}}})})})
